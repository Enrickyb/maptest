import "./App.css";
import { MapContainer, Marker, Polygon, Popup, TileLayer } from "react-leaflet";
import "leaflet/dist/leaflet.css";
import "leaflet/dist/images/marker-shadow.png";
import { icon } from "leaflet";
import { useState } from "react";

const ICON = icon({
  iconUrl: "/marker-icon.png",
  iconSize: [32, 32],
});

const polygons = [
  [-59.9819425319, 1.1358073594],
  [-59.9815096158, 1.0937382102],
  [-59.9805568405, 0.9999786321],
  [-59.9752723642, 0.9891400895],
  [-59.9797755127, 0.9811809644],
  [-59.9805534432, 0.9785883038],
  [-59.9819398435, 0.9705269229],
  [-59.9860537836, 0.9679643715],
  [-60.0205491855, 0.9560855547],
  [-60.0183286543, 0.9402506174],
  [-60.0286092519, 0.9163612929],
  [-60.0349956404, 0.9149736337],
  [-60.0394374385, 0.9058127031],
  [-60.0497223454, 0.8996981454],
  [-60.0497206551, 0.8816479027],
  [-60.0560788188, 0.8705310893],
  [-60.0522221256, 0.8621997327],
  [-60.0594422539, 0.8418756692],
  [-60.0617097264, 0.8377353627],
  [-60.0554268627, 0.8334526784],
  [-60.0544900587, 0.8080125908],
  [-60.0501119147, 0.8023911811],
  [-60.0477220625, 0.7998766137],
  [-60.0461098589, 0.7952591557],
  [-60.0536053451, 0.7785937787],
  [-60.0508319388, 0.774144342],
  [-60.0613853423, 0.7530298729],
  [-60.0613861363, 0.7477518786],
  [-60.0549986002, 0.7405374369],
  [-60.0658262714, 0.6952603111],
  [-60.0638878771, 0.682758991],
  [-60.0802729938, 0.6738615964],
  [-60.070552076, 0.6438645921],
  [-60.0686837914, 0.6123287861],
  [-60.0722181974, 0.6077546281],
  [-60.0769433173, 0.6083158517],
  [-60.0813815227, 0.6005312892],
  [-60.0927770862, 0.6044222228],
  [-60.1030525516, 0.5955352682],
  [-60.1075000305, 0.5952587723],
  [-60.1117708424, 0.5879011464],
  [-60.1211788868, 0.5899284196],
  [-60.1223785654, 0.5820222462],
  [-60.1413102501, 0.5758990037],
  [-60.1483947646, 0.5767950104],
  [-60.1524990533, 0.5638635258],
  [-60.1554635348, 0.5612133136],
  [-60.1636083523, 0.5674752547],
  [-60.173611626, 0.5633106818],
  [-60.1802725664, 0.5671976211],
  [-60.1838882105, 0.5635883868],
  [-60.1887008784, 0.5713324971],
  [-60.2088671486, 0.5662652441],
  [-60.2264682851, 0.5676092706],
  [-60.2272376842, 0.5746369866],
  [-60.2182689657, 0.581659245],
  [-60.2131691974, 0.5955973636],
  [-60.2314396355, 0.5888080493],
  [-60.2381598345, 0.605103934],
  [-60.2267209821, 0.6274487848],
  [-60.2229078435, 0.6293197075],
  [-60.2278870262, 0.6408967319],
  [-60.237336266, 0.6462172169],
  [-60.2444188068, 0.6634098143],
  [-60.2481666626, 0.665424201],
  [-60.2545766915, 0.669075797],
  [-60.2526312445, 0.6930189481],
  [-60.2628861074, 0.7170363896],
  [-60.2503542628, 0.7421081391],
  [-60.2634697423, 0.7426846877],
  [-60.2806386051, 0.7606892414],
  [-60.2954381577, 0.7762061204],
  [-60.2011357269, 0.8800482471],
  [-60.2731041542, 0.9553895829],
  [-60.2572154251, 0.9677533351],
  [-60.2773292766, 0.9762380622],
  [-60.3263962002, 0.9868450914],
  [-60.4021634842, 1.0028500742],
  [-60.3060139641, 1.0413616935],
  [-60.2855622149, 1.0790421902],
  [-60.2713905328, 1.0776915684],
  [-60.2719301956, 1.0936062741],
  [-60.2786136934, 1.0951986899],
  [-60.2793288848, 1.1148046977],
  [-60.2664857062, 1.1146810448],
  [-60.2665825574, 1.1284788836],
  [-60.2522260026, 1.1219274681],
  [-60.2447163788, 1.1244175372],
  [-60.2433316127, 1.120526059],
  [-60.2391651308, 1.1296966582],
  [-60.2231501065, 1.129517948],
  [-60.214177598, 1.1294184831],
  [-60.1313743961, 1.1033023288],
  [-60.1224988394, 1.0960892647],
  [-60.1147171651, 1.1035839161],
  [-60.081380994, 1.1027575397],
  [-60.0630532923, 1.1121926168],
  [-60.0558281211, 1.1110806271],
  [-60.045269404, 1.1199705342],
  [-60.0272216192, 1.1252518855],
  [-60.0136096361, 1.1244165974],
  [-60.0122204165, 1.117755042],
  [-60.002493905, 1.1241417931],
  [-59.9919378301, 1.124695047],
  [-59.9869789883, 1.1312179568],
  [-59.9819425319, 1.1358073594],
];

function App() {
  const [polygonsInverted, setPolygonsInverted] = useState();

  useState(() => {
    invert();
  });

  function invert() {
    const polygonsLength = polygons.length;
    var poly = [];
    for (let i = 0; i < polygonsLength; i++) {
      poly.push([polygons[i][1], polygons[i][0]]);
    }
    setPolygonsInverted(poly);
  }

  return (
    <MapContainer
      center={[51.505, -0.09]}
      zoom={13}
      scrollWheelZoom={true}
      className="leaflet-container"
    >
      <TileLayer
        attribution='&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        url="https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"
      />
      <Polygon color="purple" positions={polygonsInverted} />
      <Marker icon={ICON} position={[51.505, -0.09]}>
        <Popup>
          A pretty CSS3 popup. <br /> Easily customizable.
        </Popup>
      </Marker>
    </MapContainer>
  );
}

export default App;
